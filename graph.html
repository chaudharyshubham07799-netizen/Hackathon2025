 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expense Graph</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Poppins,sans-serif; background: #9baac0; color: #fff; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; margin:0; }
    h1 { margin-bottom:20px; }
    .chart-container { width:90%; max-width:700px; background: rgba(255,255,255,0.1); padding:20px; border-radius:20px; }
    canvas { width:100%; height:400px; }
    a { margin-top:20px; text-decoration:none; background:#00bcd4; padding:10px 20px; color:white; border-radius:10px; }
  </style>
</head>
<body>
  <h1>üìä Monthly Expense Chart</h1>
  <div class="chart-container">
    <canvas id="expenseChart"></canvas>
  </div>
  <a href="main.html">üè† Back to Home</a>

  <script>
    const expenses = JSON.parse(localStorage.getItem("expenses")) || [];
    const selectedMonth = localStorage.getItem("selectedMonth") || "all";
    const selectedYear = localStorage.getItem("selectedYear") || "all";

    const filteredExpenses = expenses.filter(exp => {
      const [year, month] = exp.date.split("-");
      return (selectedMonth === "all" || month === selectedMonth) &&
             (selectedYear === "all" || year === selectedYear);
    });

    if(filteredExpenses.length === 0) {
      alert("No expenses found for selected month!");
    }

    const expenseNames = filteredExpenses.map(e => e.name);
    const expenseAmounts = filteredExpenses.map(e => parseFloat(e.amount));

    const ctx = document.getElementById("expenseChart").getContext("2d");

    new Chart(ctx, {
      type: "pie",
      data: {
        labels: expenseNames,
        datasets: [{
          data: expenseAmounts,
          backgroundColor: [
            "#00bcd4", "#4caf50", "#ff9800", "#f44336",
            "#9c27b0", "#03a9f4", "#8bc34a", "#e91e63",
            "#ff5722", "#009688"
          ],
          borderWidth: 2,
          hoverOffset: 10
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: "right", labels:{ color:"#fff", font:{ size:14 } } },
          title: { 
            display:true,
            text: selectedMonth === "all" ? "Expense Distribution (All Months)" : `Expense Distribution (Month: ${selectedMonth})`,
            color:"#fff",
            font:{ size:18, weight:"bold" }
          }
        }
      }
    });
  </script>
</body>
</html> 


